library(devtools)
install_github("MikeJSeo/bnma")
Study <- rep(1:17, each = 2)
Treat <- c(1,3,1,3,1,3,1,3,1,2,1,3,1,3,2,3,1,3,1,3,2,3,1,3,2,3,1,2,1,2,2,3,1,2)
Outcomes <- matrix(c(3869,4014,8760,8941,2607,2593,4544,4539,1329,1367,2155,2149,1967,2039,4075,4073,1882,1901,3158,3196,4724,4711,3224,3224,640,644,3887,3811,4925,4983,2102,2161,1131,1141,200,167,570,547,149,163,341,336,45,36,113,138,49,46,156,143,66,68,62,56,127,158,52,63,15,10,61,44,130,111,21,21,31,32,433,331,937,781,157,135,300,295,37,25,98,78,207,136,218,223,130,112,73,50,155,126,25,17,20,22,18,11,82,74,109,83,37,38), ncol = 3)
covariate <- c(1,2,4,2,3,5,6,7,8,1,12,2,3,4,2,3,4)
colnames(Outcomes) <- c("Alive", "FnCVD", "FCVD")
#Outcomes <- Outcomes[,c(2,1,3)]
N <- apply(Outcomes, 1, sum)
network <- network.data(Outcomes, Study, Treat, N, response = "multinomial", type = "fixed")
install_github("MikeJSeo/bnma")
library(bnma)
Study <- rep(1:17, each = 2)
Treat <- c(1,3,1,3,1,3,1,3,1,2,1,3,1,3,2,3,1,3,1,3,2,3,1,3,2,3,1,2,1,2,2,3,1,2)
Outcomes <- matrix(c(3869,4014,8760,8941,2607,2593,4544,4539,1329,1367,2155,2149,1967,2039,4075,4073,1882,1901,3158,3196,4724,4711,3224,3224,640,644,3887,3811,4925,4983,2102,2161,1131,1141,200,167,570,547,149,163,341,336,45,36,113,138,49,46,156,143,66,68,62,56,127,158,52,63,15,10,61,44,130,111,21,21,31,32,433,331,937,781,157,135,300,295,37,25,98,78,207,136,218,223,130,112,73,50,155,126,25,17,20,22,18,11,82,74,109,83,37,38), ncol = 3)
covariate <- c(1,2,4,2,3,5,6,7,8,1,12,2,3,4,2,3,4)
colnames(Outcomes) <- c("Alive", "FnCVD", "FCVD")
#Outcomes <- Outcomes[,c(2,1,3)]
N <- apply(Outcomes, 1, sum)
network <- network.data(Outcomes, Study, Treat, N, response = "multinomial", type = "fixed")
network <- network.data(Outcomes, Study, Treat, N, response = "multinomial", covariate = covariate, covariate.model = "exchangeable")
network <- network.data(Outcomes, Study, Treat, N, response = "multinomial", baseline = "common", baseline.risk = "exchangeable")
network <- network.data(Outcomes, Study, Treat, N, response = "multinomial", baseline = "independent")
network <- network.data(Outcomes, Study, Treat, N, response = "multinomial", baseline = "exchangeable", baseline.risk = "independent")
result <- network.run(network)
library(rjags)
Outcomes <- c(-1.22, -1.53, -0.7, -2.4, -0.3, -2.6, -1.2, -0.24, -0.59, -0.73, -0.18, -2.2, -2.5, -1.8, -2.1)
SE <- c(0.504, 0.439, 0.282, 0.258, 0.505, 0.510, 0.478, 0.265, 0.354, 0.335, 0.442, 0.197, 0.190, 0.200, 0.250)
Treat <- c(1, 3, 1, 2, 1, 2, 4, 3, 4, 3, 4, 4, 5, 4, 5)
covariate <- c(1,3,4,2,5,6,7)
covariate <- cbind(c(1,3,4,2,5,6,7), c(1,2,2,2,3,4,5)) #fake covariate
Study <- c(1, 1, 2, 2, 3, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7)
network <- network.data(Outcomes = Outcomes, Treat = Treat, Study = Study, SE = SE, response = "normal", type = "fixed")
network <- network.data(Outcomes = Outcomes, Treat = Treat, Study = Study, SE = SE, response = "normal", covariate = covariate, covariate.model = "exchangeable", hy.prior.cov = list("dgamma", 0.001, 0.001))
network <- network.data(Outcomes = Outcomes, Treat = Treat, Study = Study, SE = SE, response = "normal", covariate = covariate, covariate.model = "exchangeable", hy.prior.cov = list("dhnorm", 0, 0.01))
network <- network.data(Outcomes = Outcomes, Treat = Treat, Study = Study, SE = SE, response = "normal", baseline = "exchangeable", hy.prior.bl = list("dgamma", 0.001, 0.001))
result <- network.run(network)
#library(rjags)
Outcomes = c(3, 3, 14, 7, 11, 5, 127, 102, 27, 28, 6, 4, 152, 98, 48, 60, 37, 25, 188, 138, 52, 64, 47, 45, 16, 9, 45, 57, 31, 25, 38, 33, 12, 28, 6, 8, 3, 6, 40, 32, 43, 27, 39, 22)
N = c(39, 38, 116, 114, 93, 69, 1520, 1533, 365, 355, 52, 59, 939, 945, 471, 632, 282, 278, 1921, 1916, 583, 873, 266, 263, 293, 291, 883, 858, 147, 154, 213, 207, 122, 251, 154, 151, 134, 174, 218, 209, 364, 391, 674, 680)
Study = rep(1:22, each = 2)
Treat = rep(c(1,2), 22)
blocker <- list(Outcomes = Outcomes, N = N, Study = Study, Treat = Treat)
# covariate <- as.matrix(cbind(sample(22), sample(30, size = 22)), ncol = 2)
# add one more arm (three arm)
# Outcomes = c(Outcomes, 21)
# N = c(N, 660)
# Study = c(Study, 22)
# Treat = c(Treat, 3)
#init <- list()
#init[[1]] <- list(d = c(NA, 0), mu = rep(0, 22))
#init[[2]] <- list(d = c(NA, -1), mu = rep(-3, 22))
#init[[3]] <- list(d = c(NA, 2), mu = c(-3, 5, -1, -3, 7, -3, -4, -3, -3, 0, -3, -3, 0, 3, 5, -3, -3, -1, -3, -7, -3, -3))
network <- network.data(Outcomes, Study, Treat, N = N, response = "binomial", type = "fixed")
network <- network.data(Outcomes, Study, Treat, N = N, response = "binomial")
result <- network.run(network, n.run = 20000)
summary(result)
plot(result)
thrombolytic
statins
help(network.data)
network <- with(statins, network.data(Outcomes, Study, Treat, N=N, response = "binomial", Treat.order = c("Placebo", "Statin"), covariate = covariate, covariate.type = "discrete", covariate.model = "common"))
result <- network.run(network)
summary(result)
network.covariate.plot(result, base.treatment = 1, comparison.treatment = 2)
network.covariate.plot(result, base.treatment = "Placebo", comparison.treatment = "Statin")
Outcomes <- c(15, 146, 4, 80, 9, 28, 19, 81, 5, 37, 1, 23, 33, 110, 22, 61, 0, 15, 5, 5, 14, 26, 22, 90)
N <- c(199, 393, 127, 246, 63, 65, 200, 207, 62, 67, 30, 59, 363, 360, 110, 165, 47, 49, 40, 40, 49, 50, 204, 205)
Study <- c("RAPID 1", "RAPID 1", "RAPID 2", "RAPID 2", "Kim 2007", "Kim 2007", "DE019", "DE019", "ARMADA", "ARMADA", "Weinblatt 1999", "Weinblatt 1999", "START", "START", "ATTEST", "ATTEST", "Abe 2006", "Abe 2006", "Strand 2006", "Strand 2006", "CHARISMA", "CHARISMA", "OPTION", "OPTION")
Treat <- c("Placebo", "CZP", "Placebo", "CZP", "Placebo", "Adalimumab", "Placebo", "Adalimumab", "Placebo", "Adalimumab", "Placebo", "Etanercept", "Placebo", "Infliximab", "Placebo", "Infliximab", "Placebo", "Infliximab", "Placebo", "Rituximab", "Placebo", "Tocilizumab", "Placebo", "Tocilizumab")
covariate <- c(6.15, 5.85, 6.85, 10.95, 11.65, 13, 8.1, 7.85, 8.3, 11.25, 0.915, 7.65)
Treat.order <- c("Placebo", "CZP", "Adalimumab", "Etanercept", "Infliximab", "Rituximab", "Tocilizumab")
network <- network.data(Outcomes, Study, Treat, N=N, response = "binomial", Treat.order = Treat.order)
network <- network.data(Outcomes, Study, Treat, N=N, response = "binomial", Treat.order = Treat.order, hy.prior = list("dhnorm", 0, 9.77))
#baseline
network <- network.data(Outcomes, Study, Treat, N=N, response = "binomial", Treat.order = Treat.order, baseline = "exchangeable", baseline.risk = "exchangeable")
#network <- network.data(Outcomes, Study, Treat, N=N, response = "binomial", Treat.order = Treat.order, baseline = "common", prec.Eta = 0.001)
result <- network.run(network)
#covariate
network <- network.data(Outcomes, Study, Treat, N=N, response = "binomial", Treat.order = Treat.order, covariate = covariate, hy.prior = list("dhnorm", 0, 9.77), covariate.model = "exchangeable")
network <- network.data(Outcomes, Study, Treat, N=N, response = "binomial", Treat.order = Treat.order, covariate = covariate)
result <- network.run(network)
##
network.covariate.plot(result, base.treatment = "Placebo", comparison.treatment = "CZP", covariate.name = "Disease Duration")
#certolizumab <- list(Outcomes = Outcomes, N = N, Study = Study, Treat = Treat, covariate = covariate, Treat.order = Treat.order)
#devtools::use_data(certolizumab, mcnet)
parkinsons
library(rjags)
Outcomes <- c(-1.22, -1.53, -0.7, -2.4, -0.3, -2.6, -1.2, -0.24, -0.59, -0.73, -0.18, -2.2, -2.5, -1.8, -2.1)
SE <- c(0.504, 0.439, 0.282, 0.258, 0.505, 0.510, 0.478, 0.265, 0.354, 0.335, 0.442, 0.197, 0.190, 0.200, 0.250)
Treat.order <- c("Placebo", "Pramipexole", "Ropinirole", "Bromocriptine", "Cabergoline")
Treat <- c("Placebo", "Ropinirole", "Placebo", "Pramipexole", "Placebo", "Pramipexole", "Bromocriptine", "Ropinirole", "Bromocriptine",
"Ropinirole", "Bromocriptine", "Bromocriptine", "Cabergoline", "Bromocriptine", "Cabergoline")
Study <- c(1, 1, 2, 2, 3, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7)
parkinsons <- list(Outcomes = Outcomes, SE = SE, Treat = Treat, Study = Study, Treat.order = Treat.order)
Outcomes <- c(-1.22, -1.53, -0.7, -2.4, -0.3, -2.6, -1.2, -0.24, -0.59, -0.73, -0.18, -2.2, -2.5, -1.8, -2.1)
SE <- c(0.504, 0.439, 0.282, 0.258, 0.505, 0.510, 0.478, 0.265, 0.354, 0.335, 0.442, 0.197, 0.190, 0.200, 0.250)
Treat.order <- c("Placebo", "Pramipexole", "Ropinirole", "Bromocriptine", "Cabergoline")
Treat <- c("Placebo", "Ropinirole", "Placebo", "Pramipexole", "Placebo", "Pramipexole", "Bromocriptine", "Ropinirole", "Bromocriptine",
"Ropinirole", "Bromocriptine", "Bromocriptine", "Cabergoline", "Bromocriptine", "Cabergoline")
Study <- c(1, 1, 2, 2, 3, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7)
parkinsons <- list(Outcomes = Outcomes, SE = SE, Treat = Treat, Study = Study, Treat.order = Treat.order)
devtools::use_data(parkinsons, bnma)
setwd("C:/Users/mike/Desktop/Github/bnma")
Outcomes <- c(-1.22, -1.53, -0.7, -2.4, -0.3, -2.6, -1.2, -0.24, -0.59, -0.73, -0.18, -2.2, -2.5, -1.8, -2.1)
SE <- c(0.504, 0.439, 0.282, 0.258, 0.505, 0.510, 0.478, 0.265, 0.354, 0.335, 0.442, 0.197, 0.190, 0.200, 0.250)
Treat.order <- c("Placebo", "Pramipexole", "Ropinirole", "Bromocriptine", "Cabergoline")
Treat <- c("Placebo", "Ropinirole", "Placebo", "Pramipexole", "Placebo", "Pramipexole", "Bromocriptine", "Ropinirole", "Bromocriptine",
"Ropinirole", "Bromocriptine", "Bromocriptine", "Cabergoline", "Bromocriptine", "Cabergoline")
Study <- c(1, 1, 2, 2, 3, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7)
parkinsons <- list(Outcomes = Outcomes, SE = SE, Treat = Treat, Study = Study, Treat.order = Treat.order)
usethis::use_data(parkinsons, bnma)
help(use_data)
setwd("C:/Users/mike/Desktop/Github/bnma")
Outcomes <- c(-1.22, -1.53, -0.7, -2.4, -0.3, -2.6, -1.2, -0.24, -0.59, -0.73, -0.18, -2.2, -2.5, -1.8, -2.1)
SE <- c(0.504, 0.439, 0.282, 0.258, 0.505, 0.510, 0.478, 0.265, 0.354, 0.335, 0.442, 0.197, 0.190, 0.200, 0.250)
Treat.order <- c("Placebo", "Pramipexole", "Ropinirole", "Bromocriptine", "Cabergoline")
Treat <- c("Placebo", "Ropinirole", "Placebo", "Pramipexole", "Placebo", "Pramipexole", "Bromocriptine", "Ropinirole", "Bromocriptine",
"Ropinirole", "Bromocriptine", "Bromocriptine", "Cabergoline", "Bromocriptine", "Cabergoline")
Study <- c(1, 1, 2, 2, 3, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7)
parkinsons <- list(Outcomes = Outcomes, SE = SE, Treat = Treat, Study = Study, Treat.order = Treat.order)
usethis::use_data(parkinsons)
library(rjags)
Outcomes <- c(-1.22, -1.53, -0.7, -2.4, -0.3, -2.6, -1.2, -0.24, -0.59, -0.73, -0.18, -2.2, -2.5, -1.8, -2.1)
SE <- c(0.504, 0.439, 0.282, 0.258, 0.505, 0.510, 0.478, 0.265, 0.354, 0.335, 0.442, 0.197, 0.190, 0.200, 0.250)
Treat.order <- c("Placebo", "Pramipexole", "Ropinirole", "Bromocriptine", "Cabergoline")
Treat <- c("Placebo", "Ropinirole", "Placebo", "Pramipexole", "Placebo", "Pramipexole", "Bromocriptine", "Ropinirole", "Bromocriptine",
"Ropinirole", "Bromocriptine", "Bromocriptine", "Cabergoline", "Bromocriptine", "Cabergoline")
Study <- c(1, 1, 2, 2, 3, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7)
parkinsons <- list(Outcomes = Outcomes, SE = SE, Treat = Treat, Study = Study, Treat.order = Treat.order)
usethis::use_data(parkinsons)
install_github("MikeJSeo/bnma")
